<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/home/iconDezztech.png">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="../css/main.css" rel="stylesheet">
    <link href="../css/presupuesto.css" rel="stylesheet"> 
    <link rel="icon" href="../assets/home/iconDezztech.png">

    <title>Presupuesto</title>

    <script>
        function validarFormulario(){
            let valido  = true;
    
            /* CAMPO NOMBRE */
            const nombreCampo = presupuestoFormulario.nombreCampo.value;
            const nombreCampoValid = /^[a-zA-ZÁÉÍÓÚáéíóúÑñ\s]{1,15}$/;
            const nombreCampoContent = document.getElementById("nombreCampoError");
    
            
            if (!nombreCampoValid.test(nombreCampo) || nombreCampoContent ===""){
                nombreCampoContent.textContent = "Solo se puede escribir texto y máximo 15 caracteres";
                nombreCampoContent.style.display = "block";
                valido = false;
            }else {
                nombreCampoContent.textContent= "";
                nombreCampoContent.style.display = "none";
            }
    
            /*CAMPO APELLIDO*/
            const apellidoCampo = presupuestoFormulario.apellidoCampo.value;
            const apellidoCampoValid = /^[a-zA-ZÁÉÍÓÚáéíóúÑñ\s]{1,40}$/;
            const apellidoCampoContent = document.getElementById("apellidoCampoError");
    
            
            if (!apellidoCampoValid.test(apellidoCampo) || apellidoCampoContent  === "" ){
                apellidoCampoContent.textContent = "Solo se puede escribir texto y máximo 40 caracteres";
                apellidoCampoContent.style.display = "block";
                valido = false;
            }else {
                apellidoCampoContent.textContent = "";
                apellidoCampoContent.style.display = "none";
    
            }
            
            /*CAMPO TELEFONO CONTACTO*/
            const tlfCampo = presupuestoFormulario.tlfnCampo.value;
            const tlfCampoValid = /^(?:[0-9] ?){1,9}$/;
            const tlfnCampoContent = document.getElementById("tlfCampoError");
    
            
            if (!tlfCampoValid.test(tlfCampo) || tlfnCampoContent  === ""){
                tlfnCampoContent.textContent = "Solo se pueden escribir números de máximo 9 caracteres";
                tlfnCampoContent.style.display = "block";
                valido = false;
            }else {
                tlfnCampoContent.textContent = "";
                tlfnCampoContent.style.display = "none";
    
            }
    
            /*CAMPO EMAIL*/
            const emailCampo = presupuestoFormulario.emailCampo.value;
            const emailCampoValid = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            const emailCampoContent = document.getElementById("emailCampoError");
    
            
            if (!emailCampoValid.test(emailCampo) || emailCampoContent  === "" ){
                emailCampoContent.textContent = "El formato de email debe de ser el siguiente xxxxx@yyyy.com";
                emailCampoContent.style.display = "block";
                valido = false;
            }else {
                emailCampoContent.textContent = "";
                emailCampoContent.style.display = "none";
    
            }
    
            /*CAMPO CHECK CONDICIONES*/
            const checkCampo = document.getElementById("checkCondiciones");
            const checkCampoContent = document.getElementById("condicionesCampoError");
    
            if (!checkCampo.checked) {
                checkCampoContent.textContent = "Debes aceptar los términos y condiciones para continuar.";
                checkCampoContent.style.display = "block";
                valido = false;
            }else{
                checkCampoContent.textContent = "";
                checkCampoContent.style.display = "none";
            }
    
            /*CAMPO CHECK PRODUCTO*/
            const checkProductoCampo = presupuestoFormulario.producto.value;
            const checkProductoContent = document.getElementById("condicionesCampoError");
    
            if (!checkCampo.checked) {
                checkCampoContent.textContent = "Debes aceptar los términos y condiciones para continuar.";
                checkCampoContent.style.display = "block";
                valido = false;
            }else{
                checkCampoContent.textContent = "";
                checkCampoContent.style.display = "none";
            }
    
            /*VALIDAR TODOS LOS CAMPOS*/
            if (valido) {
                alert("¡Formulario enviado con éxito!");
                return true;
            }
            else {
                return false;
            }    
    
        }
    
    
        function dataTest() {
            presupuestoFormulario.nombreCampo.value = "12345678";
            presupuestoFormulario.apellidoCampo.value = "2135123123";
            presupuestoFormulario.tlfnCampo.value  = "12345678910";
            presupuestoFormulario.emailCampo.value = "qweqwe123.com";
            
        }
    
        function dataTestSec() {
            presupuestoFormulario.nombreCampo.value = "esto tiene más de quince caracteres";
            presupuestoFormulario.apellidoCampo.value = "esta frase tiene es un test que tiene más de 40 caracteres";
            presupuestoFormulario.tlfnCampo.value  = "esto tiene letras y no debería de validar el formulario";
            presupuestoFormulario.emailCampo.value = "eqwtqwe";
            
        }
    
        function dataTestOk() {
            presupuestoFormulario.nombreCampo.value = "Usuario MasterD";
            presupuestoFormulario.apellidoCampo.value = "Apellido MasterD";
            presupuestoFormulario.tlfnCampo.value  = "921 21 21 21";
            presupuestoFormulario.emailCampo.value = "correomasterd@masterd.com";
            
        }
    
        function calcularPresupuesto() {
            let producto = 0;
            let extras = 0;
            const plazo = document.getElementById("plazo").value;
            const descuento =  plazo >= 12 && plazo < 24 ? 0.9 : plazo >= 24 && plazo < 36 ? 0.7 : plazo >= 36 ? 0.5 : 1; // 10% de descuento si plazo >= 12 meses
            
            /*document.querySelectorAll('#producto:checked').forEach((checkboxProducto) => {
                producto += parseFloat(checkboxProducto.value);
            });*/

            document.querySelectorAll('.productos:checked').forEach((checkboxProducto) => {
                producto += parseFloat(checkboxProducto.value);
            });
    
            document.querySelectorAll('.extras:checked').forEach((checkboxExtra) => {
                extras += parseFloat(checkboxExtra.value);
            });
    
            const campoTotal = document.getElementById("presupuesto-final");
            const total = (producto + extras) * descuento;
    
            campoTotal.textContent = total.toFixed(2);
    
            
            /*---------*/
        }
    
        $(document).ready(function () {
            // Aquí utilizo jquery para actualizar dinámicamente el presupuesto
            $(".productos, #plazo, .extras").on("change", calcularPresupuesto);
    
             // Resetear formulario
             $("input[type='reset']").on("click", function () {
                    $("div.invalid-feedback").text("");
                    $("#presupuesto-final").text("0€");
            });
        });
        
        
    </script>
</head>
<body>
  <section id="mainContainer">
    <nav class="navbar fixed-top navbar-home navbar-expand-lg navbar-light" id="navbar-container">
        <div class="container-fluid m-auto">
          <div class="iconNav-container col-5 d-flex">
            <a class="navbar-brand" href="../index.html"><img src="../assets/home/logoDezztechNav.png" alt="Navbar Logo"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
          </div>
          <div class="collapse col-9 navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" href="../index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="galeria.html">Galería</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="presupuesto.html">Presupuesto</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contacto.html">Contacto</a>
                </li>
              </ul>
          </div>
        </div>
        
    </nav>
    <section class="main-content">
        <div class="imageBanner" style="background-image: url(../assets/home/nvidaBanner.jpg);">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="row text-center">
                            <div class="d-flex w-100 gap-4 justify-content-center">
                                <h3><a class="text-decoration-none" href="../index.html">Home</a></h3>
                                <h2 class="dvdr">&#8680;</h2>
                                <h3>Presupuesto</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-container">
            <form action="" method="NoValue" id="presupuestoFormulario" name="presupuestoFormulario" class="w-50 form-presupuesto g-3 needs-validation" onsubmit="return validarFormulario()" onreset="resetearErrores()">
                <div class="form-section" id="datosContacto">
                    <h2>Datos de Contacto</h2>
                    
                    <div class="col-8">
                        <label for="nombreCampo" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="nombreCampo" value="">
                        <div class="invalid-feedback" id="nombreCampoError"> </div>
                    </div>
                    <div class="col-8">
                        <label for="apellidoCampo" class="form-label">Apellidos</label>
                        <input type="text" class="form-control" id="apellidoCampo" value="">
                        <div class="invalid-feedback" id="apellidoCampoError"> </div>
                    </div>
                    <div class="col-8">
                        <label for="tlfnCampo" class="form-label">Teléfono de contacto</label>
                        <input type="text" class="form-control" id="tlfnCampo" value="">
                        <div class="invalid-feedback" id="tlfCampoError"> </div>
                    </div>
                    <div class="col-8">
                        <label for="emailCampo" class="form-label">Correo electrónico</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text" id="emailCampoIcon">@</span>
                            <input type="text" class="form-control" id="emailCampo" value="">
                            <div class="invalid-feedback" id="emailCampoError"> </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-check mt-3">
                            <input class="form-check-input" type="checkbox" id="checkCondiciones">
                            <label class="form-check-label" for="checkCondiciones">
                               Aceptar las condiciones de privacidad
                            </label>
                            <div class="invalid-feedback" id="condicionesCampoError">
                                Debes de aceptar las condiciones para enviar el formulario.
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="form-section" id="presupuesto">
                        <h2>Presupuesto</h2>
                        <label>Producto:</label><br>
                        <div class="form-group productosPrincipales">
                            <div class="form-check">
                                <input class="form-check-input productos" type="checkbox" name="producto" value="674.76" id="producto1">
                                <label class="form-check-label" for="producto1">
                                    Sony WH-1000XM4, ASUS Vivobook 15 - 674,76€
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input productos" type="checkbox" name="producto" value="255" id="producto2">
                                <label class="form-check-label" for="producto2">
                                    ToshiToshiba 40 y Amazon Fire TV Stick HD - 255€
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input productos" type="checkbox" name="producto" value="491.26" id="producto3">
                                <label class="form-check-label" for="producto3">
                                    De'Longhi La Specialista y Delta Cafés - 2 Paquetes de 1 Kg - 491,26€
                                </label>
                            </div>
                        </div>

                        <br><br>
                        <div class="form-group">
                            <label for="plazo">Plazo (meses):</label>
                            <input type="number" id="plazo" name="form-control plazo" min="1" value="1" required><br>
                            <p id="plazoInfo" class="small-text form-text text-muted">
                                Se puede aplazar en:
                            </p>
                            <ul class="small">
                                <li>12 meses a 24 meses - 10% descuento</li>
                                <li>24 meses a 35 meses - 30% descuento</li>
                                <li>36 meses o más - 50% descuento</li>
                            </ul>
                        </div>

                        <hr>
            
                        <label>Extras:</label><br>
                        <div class="form-check">
                            <input class="form-check-input extras" type="checkbox" value="60" id="extra1">
                            <label class="form-check-label" for="extra1">
                                Disney Plus + y Amazon Prime  (1 año) - 60€
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input extras" type="checkbox" value="75" id="extra2">
                            <label class="form-check-label" for="extra2">
                                Netflix + y Amazon Prime  (1 año) - 75€
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input extras" type="checkbox" value="100" id="extra3">
                            <label class="form-check-label" for="extra3">
                                Amazon Prime + Netflix + Disney Plus  - 100€
                            </label>
                        </div>
                        <hr>        
                        <h3>Presupuesto Final:</h3><br>
                        <h5 class="result" id="presupuesto-final">0€</h5><br>
                        <hr>
                        <div class="col-12">
                            <button class="btn btn-primary" type="submit" onclick="validarFormulario();">Enviar</button>
                            <input class="btn btn-primary" type="reset" value="Reset" name="Reset" />
                            <button class="btn btn-primary" type="submit" onclick="dataTest();">Test Error 1</button>
                            <button class="btn btn-primary" type="submit" onclick="dataTestSec();">Test Error 2</button>
                            <button class="btn btn-primary" type="submit" onclick="dataTestOk();">Test OK</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div id="buttonToTop">
            <button class="bg-red" style="width: 50px;height: 50px;" id="scrollToTopBtn">&#8679;</button>
        </div>
    </section>
</section>
<footer class="bg-dark text-light pt-5">
    <div class="container">
        <div class="col-md-12 text-center text-md-start">
          <!-- Logo Dezztech -->
            <div class="mb-4 flogo-container">
                <h3 class="text-uppercase d-flex justify-content-center"><img class="img-fluid" src="assets/home/dezztechLogoWhite.png" alt="logoFooter"></h3>
                <div class="text-center my-5">
                  <h4>¡Todo lo que necesitas en tecnología y más!</h4>
                  <p>
                    En Dezztech somos tu tienda de confianza para encontrar lo último en tecnología, gaming y electrónica. 
                  </p>
                </div>
            </div>
          <!-- ICONOS INFO -->
            <div class="mb-4 d-flex justify-content-around">
                <div class="text-center">
                    <img class="img-fluid" src="//ponno-demo.myshopify.com/cdn/shop/files/s1_compact.png?v=1613171497" alt="envioLogo">
                    <h3>Envío Gratuito</h3>
                    <p class="small">El envío de la mayoría de los productos es gratuito.</p>
                </div>
                <div class="text-center">
                    <img class="img-fluid" src="//ponno-demo.myshopify.com/cdn/shop/files/s2_compact.png?v=1613171497" alt="atencionClienteLogo">
                    <h3>Atención al cliente</h3>
                    <p class="small">24x7 Atención al cliente</p>
                </div>
                <div class="text-center">
                    <img class="img-fluid" src="//ponno-demo.myshopify.com/cdn/shop/files/s3_compact.png?v=1613171497" alt="pagoSeguroLogo">
                    <h3>Pago seguro</h3>
                    <p class="small">El pago más seguro para los clientes.</p>
                </div>
            </div>
        </div>
        <hr class="text-light">
        <div class="row">
            <!-- Links -->
            <div class="col-md-4 mb-4">
                <h4 class="text-uppercase text-underline">Links</h4>
                <ul class="list-unstyled">
                    <li><a href="componentes/contacto.html" class="text-light text-decoration-none">📥 Contacto</a></li>
                </ul>
            </div>
            <!-- Contactos -->
            <div class="col-md-4 mb-4">
                <h4 class="text-uppercase">Info de Contacto</h4>
                <p class="small mb-1"><i class="bi bi-geo-alt"></i> 📍 Pl. Padre López, 1, 1°B</p>
                <p class="small mb-1"><i class="bi bi-envelope"></i> 📧 info@dezztech.com</p>
                <p class="small"><i class="bi bi-telephone"></i> ☎️ 924 924 924</p>
            </div>
            <!-- Newsletter -->
            <div class="col-md-4">
                <h4 class="text-uppercase">Newsletter</h4>
                <p class="small">¡Sé el primero en enterarte!</p>
                  <p>Suscríbete a nuestra newsletter y recibe:</p>
                  <ul>
                    <li>✅ Ofertas exclusivas y descuentos especiales.</li>
                    <li>✅ Noticias, novedades y tips personalizados.</li>
                    <li>✅ Contenido exclusivo directamente en tu bandeja.</li>
                  </ul>
                  
                  <p> 👉 Es fácil y gratis. ¡Únete ahora y no te pierdas nada!</p>
                <form class="d-flex">
                    <input type="email" class="form-control me-2" placeholder="email@ejemplo.com">
                    <button type="submit" class="btn btn-primary">→</button>
                </form>
                <div class="mt-3">
                    <a href="#" class="text-light me-3"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="text-light me-3"><i class="bi bi-vimeo"></i></a>
                    <a href="#" class="text-light me-3"><i class="bi bi-pinterest"></i></a>
                    <a href="#" class="text-light"><i class="bi bi-rss"></i></a>
                </div>
            </div>
        </div>
    </div>
    <div class="text-center py-3">
        <p class="mb-0 small">© 2025 Dezztech. Todos los derechos reservados.</p>
    </div>
</footer>
<script src="../js/eventos.js"></script>
</body>
</html>